!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("THREE")):"function"==typeof define&&define.amd?define(["THREE"],e):"object"==typeof exports?exports.Kotletkas=e(require("THREE")):t.Kotletkas=e(t.THREE)}(window,(function(t){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(r,o,function(e){return t[e]}.bind(null,o));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(e,i){e.exports=t},function(t,e,i){"use strict";i.r(e),i.d(e,"Kotletkas",(function(){return l}));var r=i(0);class o extends r.Mesh{constructor(t,e,i=1){super(t,e),this.strength=i}affectParticle(t){const e=(new r.Vector3).copy(t.position).sub(this.position).normalize().multiplyScalar(.4*Math.pow(t.position.distanceTo(this.position),-2));t.velocity.add(e)}}class s extends r.Mesh{constructor(t,e,i=new r.Vector3(0,0,0)){super(t.clone(),e.clone()),this.framesAlive=0,this.velocity=i}}class n extends r.Mesh{constructor(t,e,i){super(t,e),this.particleParams=i}getInitialVelocity(){return new r.Vector3(0,0,Math.random()/3)}onAnyParticleEmit(t){}onNewParticleEmit(t){}onExistingParticleEmit(t){}init(){for(let t=this.particleParams.count;t>0;t--)this.emitParticle()}emitParticle(t){let e;return t?(e=t,this.onExistingParticleEmit(e)):(e=new s(this.particleParams.geometry,this.particleParams.material),this.onNewParticleEmit(e)),e.velocity=this.getInitialVelocity(),e.position.set(this.position.x,this.position.y,this.position.z),this.onAnyParticleEmit(e),e}}class a extends r.Mesh{constructor(t,e,i){super(t,e),this.strength=i}affectParticle(t){const e=(new r.Vector3).copy(t.position).sub(this.position).normalize().multiplyScalar(.5*Math.pow(t.position.distanceTo(this.position),-2));t.velocity.sub(e)}}const l={AccelerationBehavior:class{constructor(t){this.strength=1,this.strength=t}affectParticle(t){t.velocity.divideScalar(1+.005*-this.strength)}},AntiAttractor:o,Attractor:a,Emitter:n,Particle:s,RandomNormalEmitter:class extends n{onAnyParticleEmit(t){let e;e=this.geometry instanceof r.BufferGeometry?(new r.Geometry).fromBufferGeometry(this.geometry):this.geometry;let i=Math.random()*(e.faces.length-1)<<0,o=e.faces[i],s=[],n=[],a=[],l=[o.a,o.b,o.c];for(let t in l)s.push(e.vertices[l[t]].x),n.push(e.vertices[l[t]].y),a.push(e.vertices[l[t]].z);s=[Math.max.apply(null,s),Math.min.apply(null,s)],n=[Math.max.apply(null,n),Math.min.apply(null,n)],a=[Math.max.apply(null,a),Math.min.apply(null,a)],t.position.set(Math.random()*(s[0]-s[1])+s[1],Math.random()*(n[0]-n[1])+n[1],Math.random()*(a[0]-a[1])+a[1])}},VariableAngleEmitter:class extends n{getInitialVelocity(){return new r.Vector3(Math.random()/10-.035,Math.random()/10-.035,.5)}},Sandbox:class{constructor(t){this.behaviors=[],this.particles=[],this.scene=t.scene,this.emitter=t.emitter,this.radius=t.radius,this.behaviors=t.behaviors,this.emitter.onNewParticleEmit=t=>{this.scene.add(t),this.particles.push(t)},this.emitter.init()}prepareToRender(){for(let t=this.particles.length-1;t>=0;t--){const e=this.particles[t];e.position.add(e.velocity),e.framesAlive++,(e.position.distanceTo(this.emitter.position)>this.radius||e.framesAlive>this.emitter.particleParams.lifespan)&&(e.framesAlive=0,this.emitter.emitParticle(e));for(let t=this.behaviors.length-1;t>=0;t--){this.behaviors[t].affectParticle(e)}}}}}}]).Kotletkas}));